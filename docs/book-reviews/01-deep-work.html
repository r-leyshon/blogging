<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.340">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Rich Leyshon">
<meta name="dcterms.date" content="2023-09-10">
<meta name="description" content="A review of Cal Newport’s much lauded productivity how to guide.">

<title>The Data Savvy Corner - Deep Work</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<link href="..//./www/favicon.ico" rel="icon">
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6658778373981809" crossorigin="anonymous"></script>


<link rel="stylesheet" href="../www/styles.css">
<meta property="og:title" content="The Data Savvy Corner - Deep Work">
<meta property="og:description" content="A review of Cal Newport’s much lauded productivity how to guide.">
<meta property="og:image" content="https://upload.wikimedia.org/wikipedia/commons/thumb/0/0f/Fanal%2C_Seixal%2C_Madeira_-_2021-09-19_-_IMG_7200.jpg/800px-Fanal%2C_Seixal%2C_Madeira_-_2021-09-19_-_IMG_7200.jpg?20220630234019">
<meta property="og:site-name" content="The Data Savvy Corner">
<meta property="og:image:alt" content="Misty trees in Fanal Forest, Madeira.">
<meta name="twitter:title" content="The Data Savvy Corner - Deep Work">
<meta name="twitter:description" content="A review of Cal Newport’s much lauded productivity how to guide.">
<meta name="twitter:image" content="https://upload.wikimedia.org/wikipedia/commons/thumb/0/0f/Fanal%2C_Seixal%2C_Madeira_-_2021-09-19_-_IMG_7200.jpg/800px-Fanal%2C_Seixal%2C_Madeira_-_2021-09-19_-_IMG_7200.jpg?20220630234019">
<meta name="twitter:site" content="@Rich_L1984">
<meta name="twitter:image:alt" content="Misty trees in Fanal Forest, Madeira.">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">The Data Savvy Corner</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="../index.xml" rel="" target=""><i class="bi bi-rss" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../blogs/index.html" rel="" target="">
 <span class="menu-text">Byte-Wise Musings</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../music-reviews/index.html" rel="" target="">
 <span class="menu-text">Productivity Pulse</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../book-reviews/index.html" rel="" target="">
 <span class="menu-text">Bookmarked Insights</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a>
  <ul class="collapse">
  <li><a href="#part-1-the-idea" id="toc-part-1-the-idea" class="nav-link" data-scroll-target="#part-1-the-idea">Part 1: The Idea</a></li>
  <li><a href="#part-2-the-rules" id="toc-part-2-the-rules" class="nav-link" data-scroll-target="#part-2-the-rules">Part 2: The Rules</a></li>
  </ul></li>
  <li><a href="#analysis-and-evaluation" id="toc-analysis-and-evaluation" class="nav-link" data-scroll-target="#analysis-and-evaluation">Analysis and Evaluation</a></li>
  <li><a href="#comparisons" id="toc-comparisons" class="nav-link" data-scroll-target="#comparisons">Comparisons</a></li>
  <li><a href="#recommendation" id="toc-recommendation" class="nav-link" data-scroll-target="#recommendation">Recommendation</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Deep Work</h1>
<p class="subtitle lead">Rules for Focused Success in a Distracted World</p>
  <div class="quarto-categories">
    <div class="quarto-category">Self-Help</div>
    <div class="quarto-category">Productivity</div>
    <div class="quarto-category">Business</div>
    <div class="quarto-category">Psychology</div>
    <div class="quarto-category">Philosophy</div>
  </div>
  </div>

<div>
  <div class="description">
    A review of Cal Newport’s much lauded productivity how to guide.
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Rich Leyshon </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 10, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<figure class="center figure">
<img class="shaded_box figure-img" src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/0f/Fanal%2C_Seixal%2C_Madeira_-_2021-09-19_-_IMG_7200.jpg/800px-Fanal%2C_Seixal%2C_Madeira_-_2021-09-19_-_IMG_7200.jpg?20220630234019" alt="Misty trees in Fanal Forest, Madeira." width="400px">
<figcaption class="figure-caption">
Fanal Forest, Madeira. Wikimedia Creative Commons.
</figcaption>
</figure>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>At the date of writing this review, Deep Work scores an average of 4.19 / 5.00 across over 141k ratings on <a href="https://www.goodreads.com/en/book/show/25744928">goodreads</a>. Also nominated by the same website for Best Nonfiction, 2016. Awarded gongs for best book and best seller in business &amp; leadership by Amazon &amp; the Wall Street Journal.</p>
<p>This book was recommended to me by a close colleague and I read it on holidays during some much-needed downtime in the Summer of 2023. I should note that I reflect on the relevance of the advice in this book to my own personal circumstances. To that end, it is worth noting that I currently work as a senior data scientist and that I happen to face many competing priorities in my day-to-day job.</p>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<p>Cal Newport is a celebrated author within the field of personal productivity. According to his website, Newport is an MIT Grad in Computer Science and a professor at Georgetown University <span class="citation" data-cites="CalNewport"><a href="#ref-CalNewport" role="doc-biblioref">[1]</a></span>. Deep Work is structured in 2 parts.</p>
<section id="part-1-the-idea" class="level3">
<h3 class="anchored" data-anchor-id="part-1-the-idea">Part 1: The Idea</h3>
<p>Here the author sets out his stall, establishing definitions of fundamental concepts, such as deep and shallow work and their relative value to the author’s definition of what he refers to as the ‘knowledge worker’. The author sets out noteworthy examples of individuals who (have) had a proven ability to establish deep thought throughout their illustrious careers. The author then sets out the case for why deep work is a rewarding endeavor and how its antithesis of a connected and responsive workday offers little benefit to the individual, the organisation or society. Yet , many modern organisations have unwittingly promoted and even entrenched a shallow work culture among their employees.</p>
</section>
<section id="part-2-the-rules" class="level3">
<h3 class="anchored" data-anchor-id="part-2-the-rules">Part 2: The Rules</h3>
<p>In this section, the author offers suggested interventions to make within your workplace. Exemplifying strategies with personal experience and from those around him, Newport assists the reader in visualising a professional future where they can rule their schedule, rather than the reverse.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>“… remain unresponsive to the pinprick onslaught of small obligations that seem harmless in isolation but aggregate to serious injury to his deep work habit.” <span class="citation" data-cites="DeepWork"><a href="#ref-DeepWork" role="doc-biblioref">[2, p. 142]</a></span></p>
</div>
</div>
<p>The author identifies potential sticking points and attempts to treat them, offering suggested strategies for securing the support of colleagues, stakeholders and managers in the reader’s pursuit of deep work. Moderating his message, Newport offers words of advice against the pursuit of deep work to the exclusion of everything else, yet establishing set constraints within a schedule where shallow tasks and administrative commitments are not permitted to undo your daily objectives.</p>
</section>
</section>
<section id="analysis-and-evaluation" class="level2">
<h2 class="anchored" data-anchor-id="analysis-and-evaluation">Analysis and Evaluation</h2>
<p>Much of the content in this book resonated with me. Newport takes a contrarian view of many modern professional practices, such as structuring your day around group ceremonies like stand ups or scrums, maintaining open channels of communication via Email and instant messaging applications, and as mentioned above, social media channels. Many I.T. professionals will find their progress hampered by a menagerie of ceremonies, administrative tasks and meetings of ambiguous impact. Understanding how to categorise such meetings and structure your day around your deep work goals is what Newport hopes to espouse. This has been a consistent feature of my data-related roles throughout my career. Striking that balance of engaging with stakeholders versus undertaking the work can all too often result in a fractured day with little developmental progress.</p>
<p>That’s not to say that Newport promotes a hermetic approach to work. It’s clear to most that the tool, statistic or analysis that is being developed can only be effective if it is useful. Newport states that these ‘shallow’ tasks should be kept in check. They should be minimised and must earn your attention. Placing a premium on your time and attention is at the core of the book’s message.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>“…for decisions that involve large amounts of information and multiple vague, and perhaps even conflicting restraints, your unconscious mind is well suited to tackle the issue.” <span class="citation" data-cites="DeepWork"><a href="#ref-DeepWork" role="doc-biblioref">[2, p. 145]</a></span></p>
</div>
</div>
<blockquote class="blockquote">
<p>Above, Newport summarises a high level takeaway from unconscious thought theory (UTT), which may present a theoretical basis for sleeping on a particularly challenging problem.</p>
</blockquote>
<p>A lot of what Newport writes has rung true in my experience. While not all jobs have the same requirements, my roles in data have all required a deep focus disposition. In fact, some of the strategies that the author suggests for optimising your day, I had independently arrived at. Approaches such as starting your day before the rest of the office has woken up and keeping Email responses process-related have both served me well in my career progression so far. But, there are some suggested strategies that I have not quite been convinced of. At one point, Newport discusses cognitive strategies for extending your capacity for deep concentration. The suggested approach is to remember the order of a shuffled deck of cards. Newport outlines a method for doing so and cites some studies that are indicative of the positive relationship between such activities and the mental fortitude required for deep focus. Personally, I would sacrifice too much time in achieving such a feat, whereas I would gain more by implementing the task at hand, gradually incrementing my exposure to deep concentration sessions. Newport does state that this sort of thinking misses the point entirely, and that investing effort in such a mental feat pays dividends in the longer term, though I have yet to be convinced of this claim.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>“…attention restoration theory (ART), which claims that spending time in nature can improve your ability to concentrate. This theory… is based on the concept of attention fatigue. To concentrate requires what ART calls <em>directed</em> <em>attention</em>. This resource is finite: If you exhaust it, you’ll struggle to concentrate.” <span class="citation" data-cites="DeepWork"><a href="#ref-DeepWork" role="doc-biblioref">[2, p. 147]</a></span></p>
</div>
</div>
<blockquote class="blockquote">
<p>I found this concept to be very interesting, and a little concerning. Managing burnout is something that I value. It seems that my pasttimes also require directed attention, and that perhaps I should pursue recreational activities that contrast with my professional interests. I have decided to note within my journal when I notice that I am lacking energy and to resolve to take a bike ride, swim or just a walk in order to efefctively disconnect and recharge.</p>
</blockquote>
<p>At times throughout the book, I did find myself reflecting that some of the claims or advice were not as generalisable as the author had perceived. At one point for example, the Newport suggests diagnosing whether your workplace can support a culture of deep concentration and finding alternative employment if the answer was a clear enough ‘no’. This did strike me as something that many colleagues could only dream of, with the reality of bills to pay, children to feed and job security in an uncertain sector. Advising people to leave rather than finding alternative strategies to influence managerial culture does seem a bit thoughtless.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>“Professional E-mail Sorting: Do not reply to an e-mail message if any of the following applies:</p>
<ul>
<li>It’s ambiguous or otherwise makes it hard for you to generate a reasonable response.</li>
<li>It’s not a question or proposal that interests you.</li>
<li>Nothing really good would happen if you did respond and nothing really bad would happen if you didn’t.” <span class="citation" data-cites="DeepWork"><a href="#ref-DeepWork" role="doc-biblioref">[2, p. 255]</a></span></li>
</ul>
</div>
</div>
<blockquote class="blockquote">
<p>I find this advice to be a bit myopic. This is likely great advice for an accomplished academic with a strong internal locus of control. Junior entrants to a profession typically need to prove their utility to those with greater power around them - the decision makers that could be on their next promotion panel. Ignoring Emails that are a bit ambiguous could result in passing up an oportunity to help a colleague, forge a new professional relationship or prove your worth in the workplace. Rather than approaching the needs of others with derision, I would instead advise time-boxing a response and communicating your needs clearly to the other party. Something like - ‘I’m a bit pushed for time right now and am not familiar with the context, but if you can point me to a briefing note I can get back to you on Monday, once I’ve cleared off my backlog’.</p>
</blockquote>
<p>Another feature of this book which that requires some scepticism is in the outcomes of studies used to underpin the attitudes and strategies promoted as good practice. It’s likely no news to you that the behavioural sciences has attracted a fair amount of criticism about the reproducibility of published findings over the last decade. Coupled with the widespread publication bias encountered in academic journals <span class="citation" data-cites="BMJPubBias"><a href="#ref-BMJPubBias" role="doc-biblioref">[3]</a></span> and confirmation bias abound in the field of psychology, I would suggest the author reveal some of the research that they have undertaken in validating the claims of the studies. It is unlikely that the average reader will have the necessary time to carry out their own investigation of the findings, and doubt in the ability to evidence some of the claims within the book is introduced. I do not wish to sound like I am criticising the author for choosing studies that help to evidence their claims, as I would have criticised them for not doing so had that been the case. I would ask that the author publishes their attempts to prove the hypotheses considered.</p>
<blockquote class="blockquote">
<p>“Don’t trust everything you read in the psychology literature. In fact, two thirds of it should probably be distrusted.” <span class="citation" data-cites="NatureReproducibility"><a href="#ref-NatureReproducibility" role="doc-biblioref">[4]</a></span></p>
</blockquote>
</section>
<section id="comparisons" class="level2">
<h2 class="anchored" data-anchor-id="comparisons">Comparisons</h2>
<p>There are some obvious comparisons with other productivity self-help books. One of the most obvious is in Stephen Covey’s The 7 Habits of Highly Effective People <span class="citation" data-cites="Covey"><a href="#ref-Covey" role="doc-biblioref">[5]</a></span>. Both books make an effort to discuss the management of competing priorities and how to go about organising your working day around prioritised, impactful goals. Covey’s book dedicates more energy towards effectively triaging tasks and charting progress made against longer-term priorities than what is explored within Deep Work. In fact, this may be another presumption made by Newport - that the direction of progress is obvious to the reader and it is simply a matter of finding the undisturbed time to do the work. As many of us will encounter uncertainty and a fair amount of strategic thrashing in our working lives, this could prove to be a limiting assumption.</p>
<p>Below is an example of what is commonly referred to as a “Covey Quadrant”, a rubric for efficiently categorising tasks along dimensions of urgency and importance.</p>
<p><img alt="Covey quadrant, creative commons." src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/33/7_habits_decision-making_matrix.png/596px-7_habits_decision-making_matrix.png?20181120003806" width="400" class="center"></p>
</section>
<section id="recommendation" class="level2">
<h2 class="anchored" data-anchor-id="recommendation">Recommendation</h2>
<p>There is a lot of wisdom to be gleaned from this book. Sure, some of it may be anecdotal and won’t be true in all cases. But there is an undeniable pattern in the examples provided, that sustained effort yields desirable outcomes. This is something that I have always found to be true and connects with my wider values. It is this message and the useful reminders and strategies that would form the basis of my recommendation for this book. This book is an opportunity to gain insight into how the elite of the achievers in society get things done. You may be able to make some of this work for you but don’t expect it to be easy, or perhaps even achievable in your current situation.</p>
<p>To put it bluntly, if you have ever struggled to quiet the noise at work and get things done, then this book is for you. (It’s not lost on me that that may qualify pretty much everyone who has ever worked in an office).</p>



</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body" role="list">
<div id="ref-CalNewport" class="csl-entry" role="listitem">
<div class="csl-left-margin">[1] </div><div class="csl-right-inline">Cal Newport, <span>“Calnewport.com.”</span> <a href="https://calnewport.com/">https://calnewport.com/</a></div>
</div>
<div id="ref-DeepWork" class="csl-entry" role="listitem">
<div class="csl-left-margin">[2] </div><div class="csl-right-inline">Cal Newport, <em><span>Deep Work</span></em>. PIATKUS, 1997.</div>
</div>
<div id="ref-BMJPubBias" class="csl-entry" role="listitem">
<div class="csl-left-margin">[3] </div><div class="csl-right-inline">Evelyne Decullier &amp; François Chapuis, <span>“BMJ 2005;331:433.”</span> <a href="https://www.bmj.com/rapid-response/2011/10/31/what-publication-bias">https://www.bmj.com/rapid-response/2011/10/31/what-publication-bias</a></div>
</div>
<div id="ref-NatureReproducibility" class="csl-entry" role="listitem">
<div class="csl-left-margin">[4] </div><div class="csl-right-inline">Monya Baker, <span>“Nature.com.”</span> <a href="https://www.nature.com/articles/nature.2015.18248">https://www.nature.com/articles/nature.2015.18248</a></div>
</div>
<div id="ref-Covey" class="csl-entry" role="listitem">
<div class="csl-left-margin">[5] </div><div class="csl-right-inline">Stephen R. Covey, <em><span class="nocase">The Seven Habits of Highly Effective People</span></em>. <span>Free Press</span>, 2004.</div>
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>